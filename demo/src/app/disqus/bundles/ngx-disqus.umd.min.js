!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core"],t):t(e.ngxDisqus={},e.ng.core)}(this,function(e,t){"use strict";function n(){return"undefined"!=typeof window?window:global}function i(e){return new r(e)}var r=function(){function e(e){this.shortname=e}return Object.defineProperty(e.prototype,"window",{get:function(){return n()},enumerable:!0,configurable:!0}),e}();r.decorators=[{type:t.Injectable}],r.ctorParameters=function(){return[null]};var o=function(){function e(e,n,i){this.renderer=e,this.el=n,this.dService=i,this.onNewComment=new t.EventEmitter,this.onReady=new t.EventEmitter,this.onPaginate=new t.EventEmitter}return e.prototype.ngOnChanges=function(){this.dService.window.DISQUS?this.reset():this.addDisqusScript()},e.prototype.addDisqusScript=function(){this.dService.window.disqus_config=this.getConfig();var e=this.renderer.createElement("script");e.src="//"+this.dService.shortname+".disqus.com/embed.js",e.async=!0,e.type="text/javascript",this.renderer.setAttribute(e,"data-timestamp",(new Date).getTime().toString()),this.renderer.appendChild(this.el.nativeElement,e)},e.prototype.reset=function(){this.dService.window.DISQUS.reset({reload:!0,config:this.getConfig()})},e.prototype.getConfig=function(){var e=this;return function(){this.page.identifier=e.identifier,this.page.url=e.validateUrl(e.url),this.page.title=e.title,this.category_id=e.category,this.language=e.language,this.callbacks.onNewComment=[function(t){e.onNewComment.emit(t)}],this.callbacks.onReady=[function(t){e.onReady.emit(t)}],this.callbacks.onPaginate=[function(t){e.onPaginate.emit(t)}]}},e.prototype.validateUrl=function(e){if(e){if(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e))return e;console.warn("[Disqus]: Invalid URL, return undefined")}},e.prototype.ngOnDestroy=function(){this.dService.window.DISQUS=void 0,this.dService.window.disqus_config=void 0},e}();o.decorators=[{type:t.Component,args:[{selector:"disqus",template:'<div id="disqus_thread"></div>',changeDetection:t.ChangeDetectionStrategy.OnPush}]}],o.ctorParameters=function(){return[{type:t.Renderer2},{type:t.ElementRef},{type:r}]},o.propDecorators={url:[{type:t.Input}],identifier:[{type:t.Input}],title:[{type:t.Input}],category:[{type:t.Input}],language:[{type:t.Input}],onNewComment:[{type:t.Output}],onReady:[{type:t.Output}],onPaginate:[{type:t.Output}]};var s=new t.InjectionToken("shortname"),a=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:s,useValue:t},{provide:r,useFactory:i,deps:[s]}]}},e}();a.decorators=[{type:t.NgModule,args:[{declarations:[o],exports:[o]}]}],a.ctorParameters=function(){return[]},e.DisqusFactory=i,e.SHORTNAME=s,e.DisqusModule=a,e.ɵb=o,e.ɵa=r,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-disqus.umd.min.js.map
